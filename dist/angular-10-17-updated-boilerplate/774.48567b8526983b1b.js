"use strict";(self.webpackChunkangular_10_17_updated_boilerplate=self.webpackChunkangular_10_17_updated_boilerplate||[]).push([[774],{1774:(U,m,l)=>{l.r(m),l.d(m,{RequestsModule:()=>J});var u=l(6895),d=l(433),c=l(7784),e=l(8256),p=l(8219),_=l(7110);function h(n,i){if(1&n&&(e.TgZ(0,"li"),e._uU(1),e.TgZ(2,"span",14),e._uU(3),e.qZA()()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",t.name," "),e.xp6(2),e.hij("(x",t.quantity,")")}}function b(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit,r=e.oxw();return e.KtG(r.edit(s.id))}),e._uU(1," Edit "),e.qZA()}}function f(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit,r=e.oxw();return e.KtG(r.delete(s.id))}),e._uU(1," Delete "),e.qZA()}}const q=function(n,i,t){return{"bg-success":n,"bg-warning text-dark":i,"bg-danger":t}};function Z(n,i){if(1&n&&(e.TgZ(0,"tr")(1,"td",8),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td",9)(6,"ul",10),e.YNc(7,h,4,2,"li",7),e.qZA()(),e.TgZ(8,"td")(9,"span",11),e._uU(10),e.qZA()(),e.TgZ(11,"td"),e.YNc(12,b,2,0,"button",12),e.YNc(13,f,2,0,"button",13),e.qZA()()),2&n){const t=i.$implicit,o=e.oxw();let s,r;e.xp6(2),e.Oqu(t.type),e.xp6(2),e.AsE("",null==t.Employee||null==t.Employee.Account?null:t.Employee.Account.firstName," ",null==t.Employee||null==t.Employee.Account?null:t.Employee.Account.lastName,""),e.xp6(3),e.Q6J("ngForOf",t.RequestItems),e.xp6(2),e.Q6J("ngClass",e.kEZ(8,q,"Approved"===t.status,"Pending"===t.status,"Rejected"===t.status)),e.xp6(1),e.hij(" ",t.status," "),e.xp6(2),e.Q6J("ngIf","Admin"===(null==(s=o.account())?null:s.role)),e.xp6(1),e.Q6J("ngIf","Admin"===(null==(r=o.account())?null:r.role))}}let v=(()=>{class n{constructor(t,o,s,r){this.requestService=t,this.accountService=o,this.router=s,this.route=r,this.requests=[],this.errorMessage=""}ngOnInit(){this.loadRequests()}loadRequests(){this.requestService.getAll().subscribe({next:t=>this.requests=t,error:t=>this.errorMessage=t.message})}add(){this.router.navigate(["add"],{relativeTo:this.route})}edit(t){this.router.navigate(["edit",t],{relativeTo:this.route})}delete(t){confirm("Are you sure you want to delete this request?")&&this.requestService.delete(t).subscribe({next:()=>this.loadRequests(),error:o=>this.errorMessage=o.message})}account(){return this.accountService.accountValue}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.s),e.Y36(_.B),e.Y36(c.F0),e.Y36(c.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-request-list"]],decls:23,vars:1,consts:[[1,"card","shadow-lg","border-0","rounded-4","my-4"],[1,"card-header","bg-primary","text-white","fw-semibold","fs-5","d-flex","justify-content-between","align-items-center"],[1,"btn","btn-light","btn-sm","fw-semibold",3,"click"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-hover","align-middle","text-center"],[1,"table-light"],[4,"ngFor","ngForOf"],[1,"fw-semibold"],[1,"text-start"],[1,"list-unstyled","mb-0"],[1,"badge",3,"ngClass"],["class","btn btn-sm btn-outline-primary me-1 shadow-sm",3,"click",4,"ngIf"],["class","btn btn-sm btn-outline-danger shadow-sm",3,"click",4,"ngIf"],[1,"text-muted"],[1,"btn","btn-sm","btn-outline-primary","me-1","shadow-sm",3,"click"],[1,"btn","btn-sm","btn-outline-danger","shadow-sm",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span"),e._uU(3," Requests"),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return o.add()}),e._uU(5," Add Request"),e.qZA()(),e.TgZ(6,"div",3)(7,"div",4)(8,"table",5)(9,"thead",6)(10,"tr")(11,"th"),e._uU(12,"Type"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Employee"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Items"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Status"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Actions"),e.qZA()()(),e.TgZ(21,"tbody"),e.YNc(22,Z,14,12,"tr",7),e.qZA()()()()()),2&t&&(e.xp6(22),e.Q6J("ngForOf",o.requests))},dependencies:[u.mk,u.sg,u.O5],encapsulation:2}),n})();var A=l(3030);function T(n,i){if(1&n&&(e.TgZ(0,"div",12),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.errorMessage)}}function C(n,i){if(1&n&&(e.TgZ(0,"option",16),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.AsE(" ",t.firstName," ",t.lastName," ")}}function y(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",5)(1,"label",13),e._uU(2,"Employee:"),e.qZA(),e.TgZ(3,"select",14),e.NdJ("ngModelChange",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.employee.accountId=s)}),e.YNc(4,C,2,3,"option",15),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("ngModel",t.employee.accountId),e.xp6(1),e.Q6J("ngForOf",t.employees)}}function x(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",17)(1,"div",18)(2,"div",19)(3,"label",6),e._uU(4,"Name"),e.qZA(),e.TgZ(5,"input",20),e.NdJ("ngModelChange",function(s){const a=e.CHM(t).$implicit;return e.KtG(a.name=s)}),e.qZA()(),e.TgZ(6,"div",19)(7,"label",6),e._uU(8,"Quantity"),e.qZA(),e.TgZ(9,"input",21),e.NdJ("ngModelChange",function(s){const a=e.CHM(t).$implicit;return e.KtG(a.quantity=s)}),e.qZA()(),e.TgZ(10,"div",22)(11,"button",23),e.NdJ("click",function(){const r=e.CHM(t).index,a=e.oxw();return e.KtG(a.removeItem(r))}),e._uU(12,"Remove"),e.qZA()()()()}if(2&n){const t=i.$implicit;e.xp6(5),e.Q6J("ngModel",t.name),e.xp6(4),e.Q6J("ngModel",t.quantity)}}let g=(()=>{class n{constructor(t,o,s,r){this.requestService=t,this.employeeService=o,this.route=s,this.router=r,this.id=null,this.request={type:"Equipment",employeeId:"",items:[],status:"Pending"},this.employees=[],this.errorMessage=""}ngOnInit(){this.id=this.route.snapshot.params.id?+this.route.snapshot.params.id:null,this.employeeService.getAll().subscribe(t=>this.employees=t),this.id?this.requestService.getById(this.id).subscribe({next:t=>{this.request=t},error:t=>this.errorMessage=t.message}):this.addItem()}addItem(){this.request.items.push({name:"",quantity:1})}removeItem(t){this.request.items.splice(t,1)}save(){const t=Object.assign({},this.request);this.id||delete t.employeeId,(this.id?this.requestService.update(this.id,t):this.requestService.create(t)).subscribe({next:()=>this.router.navigate(["/requests"]),error:s=>this.errorMessage=s.message})}cancel(){this.router.navigate(["/requests"])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.s),e.Y36(A.G),e.Y36(c.gz),e.Y36(c.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-request-add-edit"]],decls:27,vars:5,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],["class","alert alert-danger",4,"ngIf"],["class","mb-3",4,"ngIf"],[1,"mb-3"],[1,"form-label"],[1,"form-select",3,"ngModel","ngModelChange"],["class","border p-2 mb-2",4,"ngFor","ngForOf"],[1,"btn","btn-secondary",3,"click"],[1,"text-center"],[1,"btn","btn-primary","me-2",3,"click"],[1,"alert","alert-danger"],["for","employee",1,"form-label"],["name","employee",1,"form-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"border","p-2","mb-2"],[1,"row"],[1,"col-md-5"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["type","number",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-2","d-flex","align-items-end"],[1,"btn","btn-danger",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,T,2,1,"div",3),e.YNc(5,y,5,2,"div",4),e.TgZ(6,"div",5)(7,"label",6),e._uU(8,"Type"),e.qZA(),e.TgZ(9,"select",7),e.NdJ("ngModelChange",function(r){return o.request.type=r}),e.TgZ(10,"option"),e._uU(11,"Equipment"),e.qZA(),e.TgZ(12,"option"),e._uU(13,"Leave"),e.qZA(),e.TgZ(14,"option"),e._uU(15,"Resources"),e.qZA()()(),e.TgZ(16,"div",5)(17,"label",6),e._uU(18,"Items"),e.qZA(),e.YNc(19,x,13,2,"div",8),e.TgZ(20,"button",9),e.NdJ("click",function(){return o.addItem()}),e._uU(21,"Add Item"),e.qZA()(),e.TgZ(22,"div",10)(23,"button",11),e.NdJ("click",function(){return o.save()}),e._uU(24,"Save"),e.qZA(),e.TgZ(25,"button",9),e.NdJ("click",function(){return o.cancel()}),e._uU(26,"Cancel"),e.qZA()()()()),2&t&&(e.xp6(2),e.hij("",o.id?"Edit":"Add"," Request"),e.xp6(2),e.Q6J("ngIf",o.errorMessage),e.xp6(1),e.Q6J("ngIf",o.id),e.xp6(4),e.Q6J("ngModel",o.request.type),e.xp6(10),e.Q6J("ngForOf",o.request.items))},dependencies:[u.sg,u.O5,d.YN,d.Kr,d.Fj,d.wV,d.EJ,d.JJ,d.On],encapsulation:2}),n})();const M=[{path:"",component:v},{path:"add",component:g},{path:"edit/:id",component:g}];let E=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.Bz.forChild(M),c.Bz]}),n})(),J=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.ez,d.u5,E]}),n})()}}]);