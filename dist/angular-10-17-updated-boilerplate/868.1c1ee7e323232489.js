"use strict";(self.webpackChunkangular_10_17_updated_boilerplate=self.webpackChunkangular_10_17_updated_boilerplate||[]).push([[868],{2868:(y,c,i)=>{i.r(c),i.d(c,{WorkflowsModule:()=>Z});var a=i(6895),l=i(433),u=i(7784),t=i(8256),p=i(529);let f=(()=>{class e{constructor(o){this.http=o,this.baseUrl="https://node-js-mysql-boilerplate-api.onrender.com/accounts/workflows"}getByEmployeeId(o){return this.http.get(`${this.baseUrl}/employee/${o}`)}updateStatus(o,n){return this.http.put(`${this.baseUrl}/${o}/status`,n)}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(p.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var m=i(7110);function g(e,s){1&e&&(t.TgZ(0,"div",5)(1,"div",6)(2,"span",7),t._uU(3,"Loading..."),t.qZA()()())}function w(e,s){1&e&&(t.TgZ(0,"th",11),t._uU(1,"Actions"),t.qZA())}function h(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"td")(1,"select",16),t.NdJ("ngModelChange",function(r){t.CHM(o);const d=t.oxw().$implicit;return t.KtG(d.status=r)})("change",function(){t.CHM(o);const r=t.oxw().$implicit,d=t.oxw(2);return t.KtG(d.updateStatus(r))}),t.TgZ(2,"option"),t._uU(3,"Pending"),t.qZA(),t.TgZ(4,"option"),t._uU(5,"Approved"),t.qZA(),t.TgZ(6,"option"),t._uU(7,"Rejected"),t.qZA()()()}if(2&e){const o=t.oxw().$implicit;t.xp6(1),t.Q6J("ngModel",o.status)}}function _(e,s){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"pre",14),t._uU(5),t.ALo(6,"json"),t.qZA()(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.YNc(9,h,8,1,"td",15),t.qZA()),2&e){const o=s.$implicit,n=t.oxw(2);let r;t.xp6(2),t.Oqu(o.type),t.xp6(3),t.Oqu(t.lcZ(6,4,o.details)),t.xp6(3),t.Oqu(o.status),t.xp6(1),t.Q6J("ngIf","Admin"===(null==(r=n.account())?null:r.role))}}function v(e,s){if(1&e&&(t.TgZ(0,"div",8)(1,"table",9)(2,"thead",10)(3,"tr")(4,"th",11),t._uU(5,"Type"),t.qZA(),t.TgZ(6,"th",11),t._uU(7,"Details"),t.qZA(),t.TgZ(8,"th",11),t._uU(9,"Status"),t.qZA(),t.YNc(10,w,2,0,"th",12),t.qZA()(),t.TgZ(11,"tbody"),t.YNc(12,_,10,6,"tr",13),t.qZA()()()),2&e){const o=t.oxw();let n;t.xp6(10),t.Q6J("ngIf","Admin"===(null==(n=o.account())?null:n.role)),t.xp6(2),t.Q6J("ngForOf",o.workflows)}}const k=[{path:"",component:(()=>{class e{constructor(o,n,r){this.workflowService=o,this.accountService=n,this.route=r,this.employeeId=0,this.workflows=[],this.isLoading=!1}ngOnInit(){const o=this.route.snapshot.paramMap.get("employeeId");this.employeeId=o?+o:0,this.loadWorkflows()}loadWorkflows(){this.isLoading=!0,this.workflowService.getByEmployeeId(this.employeeId).subscribe({next:o=>{this.workflows=o,this.isLoading=!1},error:o=>{console.error("Error loading workflows",o),this.isLoading=!1}})}account(){return this.accountService.accountValue}updateStatus(o){this.workflowService.updateStatus(o.id,{status:o.status}).subscribe({next:r=>{console.log("Status updated successfully",r)},error:r=>{console.error("Error updating status",r)}})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(f),t.Y36(m.B),t.Y36(u.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-workflow-list"]],decls:6,vars:3,consts:[[1,"card","shadow","rounded-4","border-0"],[1,"card-header","bg-primary","text-white","fw-semibold","fs-5","rounded-top-4"],[1,"card-body","p-4","bg-light"],["class","text-center my-3",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"text-center","my-3"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"table-responsive"],[1,"table","table-striped","align-middle"],[1,"table-primary","rounded"],[1,"fw-semibold"],["class","fw-semibold",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"mb-0"],[4,"ngIf"],[1,"form-select","rounded-pill","shadow-sm","w-auto",3,"ngModel","ngModelChange","change"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2),t.qZA(),t.TgZ(3,"div",2),t.YNc(4,g,4,0,"div",3),t.YNc(5,v,13,2,"div",4),t.qZA()()),2&o&&(t.xp6(2),t.hij(" Workflows for Employee ",n.employeeId," "),t.xp6(2),t.Q6J("ngIf",n.isLoading),t.xp6(1),t.Q6J("ngIf",!n.isLoading))},dependencies:[a.sg,a.O5,l.YN,l.Kr,l.EJ,l.JJ,l.On,a.Ts],encapsulation:2}),e})()}];let Z=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[a.ez,l.u5,u.Bz.forChild(k)]}),e})()}}]);