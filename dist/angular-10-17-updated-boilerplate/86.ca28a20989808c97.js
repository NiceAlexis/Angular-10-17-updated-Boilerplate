"use strict";(self.webpackChunkangular_10_17_updated_boilerplate=self.webpackChunkangular_10_17_updated_boilerplate||[]).push([[86],{6086:(S,u,a)=>{a.r(u),a.d(u,{EmployeesModule:()=>k});var c=a(6895),l=a(433),p=a(7784),e=a(8256),m=a(529);let _=(()=>{class n{constructor(t){this.http=t,this.baseUrl="/accounts/employees"}getAll(){return this.http.get(this.baseUrl)}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}create(t){return this.http.post(this.baseUrl,t)}update(t,o){return this.http.put(`${this.baseUrl}/${t}`,o)}delete(t){return this.http.delete(`${this.baseUrl}/${t}`)}transfer(t,o){return this.http.post(`${this.baseUrl}/${t}/transfer`,{departmentId:o})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(m.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),b=(()=>{class n{constructor(t){this.http=t,this.baseUrl="/accounts/users"}getAll(){return this.http.get(this.baseUrl)}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(m.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var h=a(5631),g=a(7110);function y(n,i){if(1&n&&(e.TgZ(0,"div",13),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.errorMessage)}}function T(n,i){if(1&n&&(e.TgZ(0,"option",14),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.email)}}function Z(n,i){if(1&n&&(e.TgZ(0,"option",14),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}let f=(()=>{class n{constructor(t,o,s,r,d,N){this.employeeService=t,this.userService=o,this.departmentService=s,this.accountService=r,this.route=d,this.router=N,this.id=null,this.employee={employeeId:"",accountId:"",userId:"",position:"",departmentId:"",hireDate:"",status:"Active"},this.users=[],this.departments=[],this.accounts=[],this.errorMessage=""}ngOnInit(){this.id=this.route.snapshot.params.id?+this.route.snapshot.params.id:null,this.userService.getAll().subscribe(t=>this.users=t),this.departmentService.getAll().subscribe(t=>this.departments=t),this.accountService.getAll().subscribe(t=>this.accounts=t),this.id&&this.employeeService.getById(this.id).subscribe({next:t=>{if(t.hireDate){const o=new Date(t.hireDate);t.hireDate=o.toISOString().split("T")[0]}this.employee=t},error:t=>this.errorMessage=t.message})}save(){const t=Object.assign({},this.employee);this.id||delete t.hireDate,(this.id?this.employeeService.update(this.id,this.employee):this.employeeService.create(this.employee)).subscribe({next:()=>this.router.navigate(["/employees"]),error:s=>this.errorMessage=s.message})}cancel(){this.router.navigate(["/employees"])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_),e.Y36(b),e.Y36(h.n),e.Y36(g.B),e.Y36(p.gz),e.Y36(p.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-employee-add-edit"]],decls:36,vars:9,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],["class","alert alert-danger",4,"ngIf"],[1,"mb-3"],[1,"form-label"],[1,"form-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["type","date","disabled","",1,"form-control",3,"ngModel","ngModelChange"],[1,"text-center"],[1,"btn","btn-primary","me-2",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"alert","alert-danger"],[3,"value"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,y,2,1,"div",3),e.TgZ(5,"div",4)(6,"label",5),e._uU(7,"Account"),e.qZA(),e.TgZ(8,"select",6),e.NdJ("ngModelChange",function(r){return o.employee.accountId=r}),e.YNc(9,T,2,2,"option",7),e.qZA()(),e.TgZ(10,"div",4)(11,"label",5),e._uU(12,"Position"),e.qZA(),e.TgZ(13,"input",8),e.NdJ("ngModelChange",function(r){return o.employee.position=r}),e.qZA()(),e.TgZ(14,"div",4)(15,"label",5),e._uU(16,"Department"),e.qZA(),e.TgZ(17,"select",6),e.NdJ("ngModelChange",function(r){return o.employee.departmentId=r}),e.YNc(18,Z,2,2,"option",7),e.qZA()(),e.TgZ(19,"div",4)(20,"label",5),e._uU(21,"Hire Date"),e.qZA(),e.TgZ(22,"input",9),e.NdJ("ngModelChange",function(r){return o.employee.hireDate=r}),e.qZA()(),e.TgZ(23,"div",4)(24,"label",5),e._uU(25,"Status"),e.qZA(),e.TgZ(26,"select",6),e.NdJ("ngModelChange",function(r){return o.employee.status=r}),e.TgZ(27,"option"),e._uU(28,"Active"),e.qZA(),e.TgZ(29,"option"),e._uU(30,"Inactive"),e.qZA()()(),e.TgZ(31,"div",10)(32,"button",11),e.NdJ("click",function(){return o.save()}),e._uU(33,"Save"),e.qZA(),e.TgZ(34,"button",12),e.NdJ("click",function(){return o.cancel()}),e._uU(35,"Cancel"),e.qZA()()()()),2&t&&(e.xp6(2),e.hij("",o.id?"Edit":"Add"," Employee"),e.xp6(2),e.Q6J("ngIf",o.errorMessage),e.xp6(4),e.Q6J("ngModel",o.employee.accountId),e.xp6(1),e.Q6J("ngForOf",o.accounts),e.xp6(4),e.Q6J("ngModel",o.employee.position),e.xp6(4),e.Q6J("ngModel",o.employee.departmentId),e.xp6(1),e.Q6J("ngForOf",o.departments),e.xp6(4),e.Q6J("ngModel",o.employee.hireDate),e.xp6(4),e.Q6J("ngModel",o.employee.status))},dependencies:[c.sg,c.O5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On],encapsulation:2}),n})();function C(n,i){if(1&n&&(e.TgZ(0,"option",16),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}const A=function(n){return{"show d-block":n}};function E(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"h5",6),e._uU(5),e.qZA(),e.TgZ(6,"button",7),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.cancel())}),e.qZA()(),e.TgZ(7,"div",8)(8,"div",9)(9,"label",10),e._uU(10,"Department"),e.qZA(),e.TgZ(11,"select",11),e.NdJ("ngModelChange",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.departmentId=s)}),e.YNc(12,C,2,2,"option",12),e.qZA()()(),e.TgZ(13,"div",13)(14,"button",14),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.transfer())}),e._uU(15,"Transfer"),e.qZA(),e.TgZ(16,"button",15),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.cancel())}),e._uU(17,"Cancel"),e.qZA()()()()()}if(2&n){const t=e.oxw();e.Q6J("ngClass",e.VKq(4,A,t.showModal)),e.xp6(5),e.hij("Transfer Employee: ",null==t.selectedEmployee||null==t.selectedEmployee.Account?null:t.selectedEmployee.Account.email,""),e.xp6(6),e.Q6J("ngModel",t.departmentId),e.xp6(1),e.Q6J("ngForOf",t.departments)}}function M(n,i){1&n&&e._UZ(0,"div",17)}let v=(()=>{class n{constructor(){this.showModal=!1,this.selectedEmployee=null,this.departments=[],this.cancelEvent=new e.vpe,this.transferEvent=new e.vpe,this.departmentId=0}ngOnChanges(){this.selectedEmployee&&(this.departmentId=this.selectedEmployee.departmentId)}transfer(){var t;null!==(t=this.selectedEmployee)&&void 0!==t&&t.accountId&&this.departmentId&&this.transferEvent.emit({accountId:this.selectedEmployee.accountId,departmentId:this.departmentId})}cancel(){this.cancelEvent.emit()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-employee-transfer"]],inputs:{showModal:"showModal",selectedEmployee:"selectedEmployee",departments:"departments"},outputs:{cancelEvent:"cancelEvent",transferEvent:"transferEvent"},features:[e.TTD],decls:2,vars:2,consts:[["class","modal fade","tabindex","-1",3,"ngClass",4,"ngIf"],["class","modal-backdrop fade show",4,"ngIf"],["tabindex","-1",1,"modal","fade",3,"ngClass"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],[1,"form-label"],[1,"form-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"btn","btn-warning",3,"click"],[1,"btn","btn-secondary",3,"click"],[3,"value"],[1,"modal-backdrop","fade","show"]],template:function(t,o){1&t&&(e.YNc(0,E,18,6,"div",0),e.YNc(1,M,1,0,"div",1)),2&t&&(e.Q6J("ngIf",o.showModal),e.xp6(1),e.Q6J("ngIf",o.showModal))},dependencies:[c.mk,c.sg,c.O5,l.YN,l.Kr,l.EJ,l.JJ,l.On],encapsulation:2}),n})();function q(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit,r=e.oxw();return e.KtG(r.transfer(s))}),e._uU(1,"Transfer"),e.qZA()}}function U(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit,r=e.oxw();return e.KtG(r.delete(s.id))}),e._uU(1,"Delete"),e.qZA()}}const x=function(n,i){return{"bg-success":n,"bg-danger":i}};function w(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"td")(13,"span",8),e._uU(14),e.qZA()(),e.TgZ(15,"td")(16,"button",9),e.NdJ("click",function(){const r=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.viewRequests(r.id))}),e._uU(17,"Requests"),e.qZA(),e.TgZ(18,"button",9),e.NdJ("click",function(){const r=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.viewWorkflows(r.id))}),e._uU(19,"Workflows"),e.qZA(),e.YNc(20,q,2,0,"button",10),e.TgZ(21,"button",11),e.NdJ("click",function(){const r=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.edit(r.id))}),e._uU(22,"Edit"),e.qZA(),e.YNc(23,U,2,0,"button",12),e.qZA()()}if(2&n){const t=i.$implicit,o=e.oxw();let s,r;e.xp6(2),e.Oqu(t.accountId),e.xp6(2),e.Oqu(null==t.Account?null:t.Account.email),e.xp6(2),e.Oqu(t.position),e.xp6(2),e.Oqu(null==t.Department?null:t.Department.name),e.xp6(2),e.Oqu(e.xi3(11,9,t.hireDate,"shortDate")),e.xp6(3),e.Q6J("ngClass",e.WLB(12,x,"Active"===t.status,"Active"!==t.status)),e.xp6(1),e.Oqu(t.status),e.xp6(6),e.Q6J("ngIf","Admin"===(null==(s=o.account())?null:s.role)),e.xp6(3),e.Q6J("ngIf","Admin"===(null==(r=o.account())?null:r.role))}}function J(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.add())}),e._uU(1,"Add Employee"),e.qZA()}}const I=[{path:"",component:(()=>{class n{constructor(t,o,s,r){this.employeeService=t,this.departmentService=o,this.router=s,this.accountService=r,this.employees=[],this.departments=[],this.showModal=!1,this.selectedEmployee=null}ngOnInit(){this.loadEmployees(),this.departmentService.getAll().subscribe(t=>this.departments=t)}loadEmployees(){this.employeeService.getAll().subscribe(t=>this.employees=t)}account(){return this.accountService.accountValue}add(){this.router.navigate(["/employees/add"])}edit(t){this.router.navigate(["/employees/edit",t])}delete(t){confirm("Are you sure you want to delete this employee?")&&this.employeeService.delete(t).subscribe(()=>this.loadEmployees())}transfer(t){this.selectedEmployee=t,this.showModal=!0}onCancelTransfer(){this.showModal=!1,this.selectedEmployee=null}onTransferConfirmed(t){this.employeeService.transfer(t.accountId,t.departmentId).subscribe(()=>{this.showModal=!1,this.selectedEmployee=null,this.loadEmployees()})}viewRequests(t){this.router.navigate(["/employees",t,"requests"])}viewWorkflows(t){this.router.navigate(["/employees",t,"workflows"])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_),e.Y36(h.n),e.Y36(p.F0),e.Y36(g.B))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-employee-list"]],decls:26,vars:5,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],["class","btn btn-primary float-end",3,"click",4,"ngIf"],[3,"showModal","selectedEmployee","departments","cancelEvent","transferEvent"],[1,"badge",3,"ngClass"],[1,"btn","btn-sm","btn-info","me-1",3,"click"],["class","btn btn-sm btn-warning me-1",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-primary","me-1",3,"click"],["class","btn btn-sm btn-danger",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-warning","me-1",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"btn","btn-primary","float-end",3,"click"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Employees"),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"table",4)(6,"thead")(7,"tr")(8,"th"),e._uU(9,"Employee ID"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"User"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Position"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Department"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Hire Date"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Status"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"Actions"),e.qZA()()(),e.TgZ(22,"tbody"),e.YNc(23,w,24,15,"tr",5),e.qZA()()(),e.YNc(24,J,2,0,"button",6),e.qZA()(),e.TgZ(25,"app-employee-transfer",7),e.NdJ("cancelEvent",function(){return o.onCancelTransfer()})("transferEvent",function(r){return o.onTransferConfirmed(r)}),e.qZA()),2&t){let s;e.xp6(23),e.Q6J("ngForOf",o.employees),e.xp6(1),e.Q6J("ngIf","Admin"===(null==(s=o.account())?null:s.role)),e.xp6(1),e.Q6J("showModal",o.showModal)("selectedEmployee",o.selectedEmployee)("departments",o.departments)}},dependencies:[c.mk,c.sg,c.O5,v,c.uU],encapsulation:2}),n})()},{path:"add",component:f},{path:"edit/:id",component:f},{path:"transfer/:id",component:v}];let k=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.ez,l.u5,p.Bz.forChild(I)]}),n})()}}]);