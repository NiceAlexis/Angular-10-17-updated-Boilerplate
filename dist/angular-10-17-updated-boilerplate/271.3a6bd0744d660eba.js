"use strict";(self.webpackChunkangular_10_17_updated_boilerplate=self.webpackChunkangular_10_17_updated_boilerplate||[]).push([[271],{271:(M,p,s)=>{s.r(p),s.d(p,{DepartmentsModule:()=>C});var c=s(6895),a=s(433),l=s(7784),t=s(8256),m=s(5631),g=s(7110);function _(n,r){1&n&&(t.TgZ(0,"div",10)(1,"div",11)(2,"span",12),t._uU(3,"Loading..."),t.qZA()()())}function h(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,d=t.oxw(2);return t.KtG(d.delete(o.id))}),t._UZ(1,"i",21),t._uU(2," Delete "),t.qZA()}}function b(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr",15)(1,"td")(2,"strong"),t._uU(3),t.qZA()(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td")(9,"button",17),t.NdJ("click",function(){const d=t.CHM(e).$implicit,y=t.oxw(2);return t.KtG(y.edit(d.id))}),t._UZ(10,"i",18),t._uU(11," Edit "),t.qZA(),t.YNc(12,h,3,0,"button",19),t.qZA()()}if(2&n){const e=r.$implicit,i=t.oxw(2);t.xp6(3),t.Oqu(e.name),t.xp6(2),t.Oqu(e.description),t.xp6(2),t.Oqu(e.employeeCount),t.xp6(5),t.Q6J("ngIf","Admin"===i.account.role)}}function f(n,r){if(1&n&&(t.ynx(0),t.TgZ(1,"table",13)(2,"thead",14)(3,"tr",15)(4,"th"),t._uU(5,"Name"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Description"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Employee Count"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Actions"),t.qZA()()(),t.TgZ(12,"tbody"),t.YNc(13,b,13,4,"tr",16),t.qZA()(),t.BQk()),2&n){const e=t.oxw();t.xp6(13),t.Q6J("ngForOf",e.departments)}}function Z(n,r){1&n&&(t.TgZ(0,"div",22),t._UZ(1,"i",23),t._uU(2,"No departments found. "),t.qZA())}function v(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.add())}),t._UZ(1,"i",25),t._uU(2," Add Department "),t.qZA()}}let x=(()=>{class n{constructor(e,i,o){this.departmentService=e,this.accountService=i,this.router=o,this.departments=[],this.errorMessage="",this.isLoading=!1}ngOnInit(){this.account=this.accountService.accountValue,console.log(this.account),this.loadDepartments()}loadDepartments(){this.isLoading=!0,this.departmentService.getAll().subscribe({next:e=>{this.departments=e,this.isLoading=!1},error:e=>{this.errorMessage=e.message,this.isLoading=!1}})}add(){this.router.navigate(["/departments/add"])}edit(e){this.router.navigate(["/departments/edit",e])}delete(e){confirm("Are you sure you want to delete this department?")&&this.departmentService.delete(e).subscribe({next:()=>this.loadDepartments(),error:i=>this.errorMessage=i.message})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.n),t.Y36(g.B),t.Y36(l.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-department-list"]],decls:13,vars:4,consts:[[1,"container","my-4"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"fw-bold","text-primary"],[1,"bi","bi-diagram-3","me-2"],[1,"table-responsive","shadow","rounded-4"],["class","text-center my-4",4,"ngIf"],[4,"ngIf","ngIfElse"],["noDepartments",""],[1,"mt-4","text-end"],["class","btn btn-success",3,"click",4,"ngIf"],[1,"text-center","my-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"table","table-hover","align-middle","mb-0","bg-white","rounded-4","overflow-hidden","animate__animated","animate__fadeIn"],[1,"table-dark"],[1,"text-center"],["class","text-center",4,"ngFor","ngForOf"],[1,"btn","btn-outline-primary","px-3","py-1","me-2",3,"click"],[1,"bi","bi-pencil-square","me-1"],["class","btn btn-outline-danger px-3 py-1",3,"click",4,"ngIf"],[1,"btn","btn-outline-danger","px-3","py-1",3,"click"],[1,"bi","bi-trash","me-1"],[1,"text-center","text-muted","py-4"],[1,"bi","bi-info-circle","me-2"],[1,"btn","btn-success",3,"click"],[1,"bi","bi-plus-circle","me-2"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),t._UZ(3,"i",3),t._uU(4,"Departments"),t.qZA()(),t.TgZ(5,"div")(6,"div",4),t.YNc(7,_,4,0,"div",5),t.YNc(8,f,14,1,"ng-container",6),t.YNc(9,Z,3,0,"ng-template",null,7,t.W1O),t.qZA(),t.TgZ(11,"div",8),t.YNc(12,v,3,0,"button",9),t.qZA()()()),2&e){const o=t.MAs(10);t.xp6(7),t.Q6J("ngIf",i.isLoading),t.xp6(1),t.Q6J("ngIf",!i.isLoading&&(null==i.departments?null:i.departments.length)>0)("ngIfElse",o),t.xp6(4),t.Q6J("ngIf","Admin"===i.account.role)}},dependencies:[c.sg,c.O5],encapsulation:2}),n})();function A(n,r){if(1&n&&(t.TgZ(0,"div",13),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.errorMessage," ")}}let u=(()=>{class n{constructor(e,i,o){this.departmentService=e,this.route=i,this.router=o,this.id=null,this.department={name:"",description:""},this.errorMessage=""}ngOnInit(){this.id=this.route.snapshot.params.id?+this.route.snapshot.params.id:null,this.id&&this.departmentService.getById(this.id).subscribe({next:e=>this.department=e,error:e=>this.errorMessage=e.message})}save(){this.id?this.departmentService.update(this.id,this.department).subscribe({next:()=>this.router.navigate(["/departments"]),error:e=>this.errorMessage=e.message}):this.departmentService.create(this.department).subscribe({next:()=>this.router.navigate(["/departments"]),error:e=>this.errorMessage=e.message})}cancel(){this.router.navigate(["/departments"])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.n),t.Y36(l.gz),t.Y36(l.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-department-add-edit"]],decls:20,vars:4,consts:[[1,"card","shadow","rounded-4","border-0"],[1,"card-header","bg-primary","text-white","fw-semibold","fs-5","rounded-top-4"],[1,"card-body","p-4","bg-light"],["class","alert alert-danger",4,"ngIf"],[1,"mb-4"],[1,"form-label","fw-semibold"],["type","text","placeholder","Enter department name",1,"form-control","form-control-lg","rounded-3",3,"ngModel","ngModelChange"],["type","text","placeholder","Enter short description",1,"form-control","form-control-lg","rounded-3",3,"ngModel","ngModelChange"],[1,"text-center","mt-4"],[1,"btn","btn-success","px-4","py-2","fw-semibold","me-3","rounded-pill","shadow-sm",3,"click"],[1,"bi","bi-check-circle","me-1"],[1,"btn","btn-outline-secondary","px-4","py-2","fw-semibold","rounded-pill",3,"click"],[1,"bi","bi-x-circle","me-1"],[1,"alert","alert-danger"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2),t.qZA(),t.TgZ(3,"div",2),t.YNc(4,A,2,1,"div",3),t.TgZ(5,"div",4)(6,"label",5),t._uU(7,"Name"),t.qZA(),t.TgZ(8,"input",6),t.NdJ("ngModelChange",function(d){return i.department.name=d}),t.qZA()(),t.TgZ(9,"div",4)(10,"label",5),t._uU(11,"Description"),t.qZA(),t.TgZ(12,"input",7),t.NdJ("ngModelChange",function(d){return i.department.description=d}),t.qZA()(),t.TgZ(13,"div",8)(14,"button",9),t.NdJ("click",function(){return i.save()}),t._UZ(15,"i",10),t._uU(16," Save "),t.qZA(),t.TgZ(17,"button",11),t.NdJ("click",function(){return i.cancel()}),t._UZ(18,"i",12),t._uU(19," Cancel "),t.qZA()()()()),2&e&&(t.xp6(2),t.hij(" ",i.id?"Edit":"Add"," Department "),t.xp6(2),t.Q6J("ngIf",i.errorMessage),t.xp6(4),t.Q6J("ngModel",i.department.name),t.xp6(4),t.Q6J("ngModel",i.department.description))},dependencies:[c.O5,a.Fj,a.JJ,a.On],encapsulation:2}),n})();const T=[{path:"",component:x},{path:"add",component:u},{path:"edit/:id",component:u}];let C=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.ez,a.u5,a.UX,l.Bz.forChild(T)]}),n})()}}]);