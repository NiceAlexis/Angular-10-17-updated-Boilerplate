"use strict";(self.webpackChunkangular_10_17_updated_boilerplate=self.webpackChunkangular_10_17_updated_boilerplate||[]).push([[301],{6301:(F,m,a)=>{a.r(m),a.d(m,{EmployeesModule:()=>L});var d=a(6895),r=a(433),p=a(7784),e=a(8256),u=a(3030),b=a(529);let v=(()=>{class n{constructor(t){this.http=t,this.baseUrl="https://node-js-mysql-boilerplate-api.onrender.com/accounts/users"}getAll(){return this.http.get(this.baseUrl)}getById(t){return this.http.get(`${this.baseUrl}/${t}`)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(b.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var _=a(5631),g=a(7110);function y(n,l){if(1&n&&(e.TgZ(0,"div",14),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.errorMessage," ")}}function T(n,l){if(1&n&&(e.TgZ(0,"option",15),e._uU(1),e.qZA()),2&n){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.email)}}function Z(n,l){if(1&n&&(e.TgZ(0,"option",15),e._uU(1),e.qZA()),2&n){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}let h=(()=>{class n{constructor(t,o,i,s,c,S){this.employeeService=t,this.userService=o,this.departmentService=i,this.accountService=s,this.route=c,this.router=S,this.id=null,this.employee={employeeId:"",accountId:"",userId:"",position:"",departmentId:"",hireDate:"",status:"Active"},this.users=[],this.departments=[],this.accounts=[],this.errorMessage=""}ngOnInit(){this.id=this.route.snapshot.params.id?+this.route.snapshot.params.id:null,this.userService.getAll().subscribe(t=>this.users=t),this.departmentService.getAll().subscribe(t=>this.departments=t),this.accountService.getAll().subscribe(t=>this.accounts=t),this.id&&this.employeeService.getById(this.id).subscribe({next:t=>{if(t.hireDate){const o=new Date(t.hireDate);t.hireDate=o.toISOString().split("T")[0]}this.employee=t},error:t=>this.errorMessage=t.message})}save(){const t=Object.assign({},this.employee);this.id||delete t.hireDate,(this.id?this.employeeService.update(this.id,this.employee):this.employeeService.create(this.employee)).subscribe({next:()=>{this.router.navigate(["../"],{relativeTo:this.route})},error:i=>this.errorMessage=i.message})}cancel(){this.router.navigate(["/employees"])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.G),e.Y36(v),e.Y36(_.n),e.Y36(g.B),e.Y36(p.gz),e.Y36(p.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-employee-add-edit"]],decls:36,vars:9,consts:[[1,"card","shadow-lg","border-0","rounded-4"],[1,"card-header","bg-primary","text-white","fs-5","fw-semibold","rounded-top-4"],[1,"card-body","bg-light"],["class","alert alert-danger",4,"ngIf"],[1,"mb-3"],[1,"form-label","fw-semibold"],[1,"form-select","rounded-3","shadow-sm",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","text",1,"form-control","rounded-3","shadow-sm",3,"ngModel","ngModelChange"],["type","date","disabled","",1,"form-control","rounded-3","shadow-sm",3,"ngModel","ngModelChange"],[1,"mb-4"],[1,"text-center"],[1,"btn","btn-success","px-4","py-2","me-3","shadow-sm","fw-semibold",3,"click"],[1,"btn","btn-outline-secondary","px-4","py-2","shadow-sm","fw-semibold",3,"click"],[1,"alert","alert-danger"],[3,"value"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,y,2,1,"div",3),e.TgZ(5,"div",4)(6,"label",5),e._uU(7,"Account"),e.qZA(),e.TgZ(8,"select",6),e.NdJ("ngModelChange",function(s){return o.employee.accountId=s}),e.YNc(9,T,2,2,"option",7),e.qZA()(),e.TgZ(10,"div",4)(11,"label",5),e._uU(12,"Position"),e.qZA(),e.TgZ(13,"input",8),e.NdJ("ngModelChange",function(s){return o.employee.position=s}),e.qZA()(),e.TgZ(14,"div",4)(15,"label",5),e._uU(16,"Department"),e.qZA(),e.TgZ(17,"select",6),e.NdJ("ngModelChange",function(s){return o.employee.departmentId=s}),e.YNc(18,Z,2,2,"option",7),e.qZA()(),e.TgZ(19,"div",4)(20,"label",5),e._uU(21,"Hire Date"),e.qZA(),e.TgZ(22,"input",9),e.NdJ("ngModelChange",function(s){return o.employee.hireDate=s}),e.qZA()(),e.TgZ(23,"div",10)(24,"label",5),e._uU(25,"Status"),e.qZA(),e.TgZ(26,"select",6),e.NdJ("ngModelChange",function(s){return o.employee.status=s}),e.TgZ(27,"option"),e._uU(28,"Active"),e.qZA(),e.TgZ(29,"option"),e._uU(30,"Inactive"),e.qZA()()(),e.TgZ(31,"div",11)(32,"button",12),e.NdJ("click",function(){return o.save()}),e._uU(33,"\u{1f4be} Save"),e.qZA(),e.TgZ(34,"button",13),e.NdJ("click",function(){return o.cancel()}),e._uU(35,"\u21a9\ufe0f Cancel"),e.qZA()()()()),2&t&&(e.xp6(2),e.hij(" ",o.id?"Edit":"Add"," Employee "),e.xp6(2),e.Q6J("ngIf",o.errorMessage),e.xp6(4),e.Q6J("ngModel",o.employee.accountId),e.xp6(1),e.Q6J("ngForOf",o.accounts),e.xp6(4),e.Q6J("ngModel",o.employee.position),e.xp6(4),e.Q6J("ngModel",o.employee.departmentId),e.xp6(1),e.Q6J("ngForOf",o.departments),e.xp6(4),e.Q6J("ngModel",o.employee.hireDate),e.xp6(4),e.Q6J("ngModel",o.employee.status))},dependencies:[d.sg,d.O5,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.On],encapsulation:2}),n})();function A(n,l){if(1&n&&(e.TgZ(0,"option",16),e._uU(1),e.qZA()),2&n){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function C(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"h5",6),e._uU(5),e.qZA(),e.TgZ(6,"button",7),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.cancel())}),e.qZA()(),e.TgZ(7,"div",8)(8,"div",9)(9,"label",10),e._uU(10,"Select New Department"),e.qZA(),e.TgZ(11,"select",11),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.departmentId=i)}),e.YNc(12,A,2,2,"option",12),e.qZA()()(),e.TgZ(13,"div",13)(14,"button",14),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.transfer())}),e._uU(15,"Transfer"),e.qZA(),e.TgZ(16,"button",15),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.cancel())}),e._uU(17,"Cancel"),e.qZA()()()()()}if(2&n){const t=e.oxw();e.xp6(5),e.hij(" Transfer Employee: ",null==t.selectedEmployee||null==t.selectedEmployee.Account?null:t.selectedEmployee.Account.email," "),e.xp6(6),e.Q6J("ngModel",t.departmentId),e.xp6(1),e.Q6J("ngForOf",t.departments)}}function w(n,l){1&n&&e._UZ(0,"div",17)}let f=(()=>{class n{constructor(){this.showModal=!1,this.selectedEmployee=null,this.departments=[],this.cancelEvent=new e.vpe,this.transferEvent=new e.vpe,this.departmentId=0}ngOnChanges(){this.selectedEmployee&&(this.departmentId=this.selectedEmployee.departmentId)}transfer(){var t;null!==(t=this.selectedEmployee)&&void 0!==t&&t.accountId&&this.departmentId&&this.transferEvent.emit({accountId:this.selectedEmployee.accountId,departmentId:this.departmentId,type:"Transfer",status:"Pending"})}cancel(){this.cancelEvent.emit()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-employee-transfer"]],inputs:{showModal:"showModal",selectedEmployee:"selectedEmployee",departments:"departments"},outputs:{cancelEvent:"cancelEvent",transferEvent:"transferEvent"},features:[e.TTD],decls:2,vars:2,consts:[["class","modal fade show d-block","tabindex","-1",4,"ngIf"],["class","modal-backdrop fade show","style","position: fixed; top: 0; left: 0; width: 100%; height: 100vh; z-index: 1040;",4,"ngIf"],["tabindex","-1",1,"modal","fade","show","d-block"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","rounded-4","shadow"],[1,"modal-header","bg-info","text-white","rounded-top-4"],[1,"modal-title","fw-semibold"],["type","button",1,"btn-close",3,"click"],[1,"modal-body","bg-light"],[1,"mb-3"],[1,"form-label","fw-semibold"],[1,"form-select","rounded-3","shadow-sm",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"btn","btn-warning","fw-semibold","px-4","shadow-sm",3,"click"],[1,"btn","btn-outline-secondary","px-4","fw-semibold","shadow-sm",3,"click"],[3,"value"],[1,"modal-backdrop","fade","show",2,"position","fixed","top","0","left","0","width","100%","height","100vh","z-index","1040"]],template:function(t,o){1&t&&(e.YNc(0,C,18,3,"div",0),e.YNc(1,w,1,0,"div",1)),2&t&&(e.Q6J("ngIf",o.showModal),e.xp6(1),e.Q6J("ngIf",o.showModal))},dependencies:[d.sg,d.O5,r.YN,r.Kr,r.EJ,r.JJ,r.On],encapsulation:2}),n})();function x(n,l){1&n&&(e.TgZ(0,"div",11)(1,"div",12)(2,"span",13),e._uU(3,"Loading..."),e.qZA()()())}function E(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,s=e.oxw(2);return e.KtG(s.transfer(i))}),e._uU(1," Transfer "),e.qZA()}}function M(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,s=e.oxw(2);return e.KtG(s.delete(i.id))}),e._uU(1," Delete "),e.qZA()}}const q=function(n,l){return{"bg-success":n,"bg-danger":l}};function U(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"td")(13,"span",18),e._uU(14),e.qZA()(),e.TgZ(15,"td",16)(16,"button",19),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.viewRequests(s.accountId))}),e._uU(17," Requests "),e.qZA(),e.TgZ(18,"button",19),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.viewWorkflows(s.id))}),e._uU(19," Workflows "),e.qZA(),e.YNc(20,E,2,0,"button",20),e.TgZ(21,"button",21),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.edit(s.id))}),e._uU(22," Edit "),e.qZA(),e.YNc(23,M,2,0,"button",22),e.qZA()()}if(2&n){const t=l.$implicit,o=e.oxw(2);let i,s;e.xp6(2),e.Oqu(t.accountId),e.xp6(2),e.Oqu(null==t.Account?null:t.Account.email),e.xp6(2),e.Oqu(t.position),e.xp6(2),e.Oqu(null==t.Department?null:t.Department.name),e.xp6(2),e.Oqu(e.xi3(11,9,t.hireDate,"mediumDate")),e.xp6(3),e.Q6J("ngClass",e.WLB(12,q,"Active"===t.status,"Active"!==t.status)),e.xp6(1),e.hij(" ",t.status," "),e.xp6(6),e.Q6J("ngIf","Admin"===(null==(i=o.account())?null:i.role)),e.xp6(3),e.Q6J("ngIf","Admin"===(null==(s=o.account())?null:s.role))}}function I(n,l){if(1&n&&(e.ynx(0),e.TgZ(1,"table",14)(2,"thead",15)(3,"tr")(4,"th"),e._uU(5,"Employee ID"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"User"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Position"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Department"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Hire Date"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Status"),e.qZA(),e.TgZ(16,"th",16),e._uU(17,"Actions"),e.qZA()()(),e.TgZ(18,"tbody",16),e.YNc(19,U,24,15,"tr",17),e.qZA()(),e.BQk()),2&n){const t=e.oxw();e.xp6(19),e.Q6J("ngForOf",t.employees)}}function J(n,l){1&n&&(e.TgZ(0,"div",25),e._UZ(1,"i",26),e._uU(2,"No employees found. "),e.qZA())}function k(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.add())}),e._UZ(1,"i",28),e._uU(2," Add Employee "),e.qZA()}}const N=[{path:"",component:(()=>{class n{constructor(t,o,i,s){this.employeeService=t,this.departmentService=o,this.router=i,this.accountService=s,this.employees=[],this.departments=[],this.showModal=!1,this.selectedEmployee=null,this.isLoading=!1}ngOnInit(){this.loadEmployees(),this.departmentService.getAll().subscribe(t=>this.departments=t)}loadEmployees(){this.isLoading=!0,this.employeeService.getAll().subscribe({next:t=>{this.employees=t,this.isLoading=!1},error:t=>{this.isLoading=!1}})}account(){return this.accountService.accountValue}add(){this.router.navigate(["/employees/add"])}edit(t){this.router.navigate(["/employees/edit",t])}delete(t){confirm("Are you sure you want to delete this employee?")&&this.employeeService.delete(t).subscribe(()=>this.loadEmployees())}transfer(t){this.selectedEmployee=t,this.showModal=!0}onCancelTransfer(){this.showModal=!1,this.selectedEmployee=null}onTransferConfirmed(t){this.employeeService.transfer(t.accountId,t.departmentId).subscribe(()=>{this.showModal=!1,this.selectedEmployee=null,this.loadEmployees()})}viewRequests(t){this.router.navigate(["/employees",t,"requests"])}viewWorkflows(t){this.router.navigate(["/employees",t,"workflows"])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.G),e.Y36(_.n),e.Y36(p.F0),e.Y36(g.B))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-employee-list"]],decls:14,vars:7,consts:[[1,"container","my-4"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"fw-bold","text-primary"],[1,"bi","bi-people-fill","me-2"],[1,"table-responsive","shadow","rounded-4"],["class","text-center my-4",4,"ngIf"],[4,"ngIf","ngIfElse"],["noEmployees",""],[1,"mt-4","text-end"],["class","btn btn-success px-4 py-2 fw-semibold shadow-sm",3,"click",4,"ngIf"],[3,"showModal","selectedEmployee","departments","cancelEvent","transferEvent"],[1,"text-center","my-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"table","table-hover","align-middle","mb-0","bg-white","rounded-4","overflow-hidden","animate__animated","animate__fadeIn"],[1,"table-dark","text-center"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"badge","rounded-pill","px-3","py-2","fs-6",3,"ngClass"],[1,"btn","btn-outline-info","btn-sm","fw-semibold","me-2",3,"click"],["class","btn btn-outline-warning btn-sm fw-semibold me-2",3,"click",4,"ngIf"],[1,"btn","btn-outline-primary","btn-sm","fw-semibold","me-2",3,"click"],["class","btn btn-outline-danger btn-sm fw-semibold",3,"click",4,"ngIf"],[1,"btn","btn-outline-warning","btn-sm","fw-semibold","me-2",3,"click"],[1,"btn","btn-outline-danger","btn-sm","fw-semibold",3,"click"],[1,"text-center","text-muted","py-4"],[1,"bi","bi-info-circle","me-2"],[1,"btn","btn-success","px-4","py-2","fw-semibold","shadow-sm",3,"click"],[1,"bi","bi-plus-circle","me-2"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e._UZ(3,"i",3),e._uU(4,"Employees"),e.qZA()(),e.TgZ(5,"div")(6,"div",4),e.YNc(7,x,4,0,"div",5),e.YNc(8,I,20,1,"ng-container",6),e.YNc(9,J,3,0,"ng-template",null,7,e.W1O),e.qZA(),e.TgZ(11,"div",8),e.YNc(12,k,3,0,"button",9),e.qZA()()(),e.TgZ(13,"app-employee-transfer",10),e.NdJ("cancelEvent",function(){return o.onCancelTransfer()})("transferEvent",function(s){return o.onTransferConfirmed(s)}),e.qZA()),2&t){const i=e.MAs(10);let s;e.xp6(7),e.Q6J("ngIf",o.isLoading),e.xp6(1),e.Q6J("ngIf",!o.isLoading&&o.employees&&o.employees.length)("ngIfElse",i),e.xp6(4),e.Q6J("ngIf","Admin"===(null==(s=o.account())?null:s.role)),e.xp6(1),e.Q6J("showModal",o.showModal)("selectedEmployee",o.selectedEmployee)("departments",o.departments)}},dependencies:[d.mk,d.sg,d.O5,f,d.uU],encapsulation:2}),n})()},{path:"add",component:h},{path:"edit/:id",component:h},{path:"transfer/:id",component:f}];let L=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[d.ez,r.u5,p.Bz.forChild(N)]}),n})()}}]);