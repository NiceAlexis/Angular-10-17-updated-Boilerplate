"use strict";(self.webpackChunkangular_10_17_updated_boilerplate=self.webpackChunkangular_10_17_updated_boilerplate||[]).push([[118],{1118:(y,m,d)=>{d.r(m),d.d(m,{RequestsModule:()=>C});var c=d(6895),u=d(433),a=d(7784),e=d(8256),p=d(8219),g=d(3030);function q(n,o){if(1&n&&(e.TgZ(0,"div",11),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.errorMessage)}}function h(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",12)(1,"div",13)(2,"div",14)(3,"label",5),e._uU(4,"Name"),e.qZA(),e.TgZ(5,"input",15),e.NdJ("ngModelChange",function(i){const l=e.CHM(t).$implicit;return e.KtG(l.name=i)}),e.qZA()(),e.TgZ(6,"div",14)(7,"label",5),e._uU(8,"Quantity"),e.qZA(),e.TgZ(9,"input",16),e.NdJ("ngModelChange",function(i){const l=e.CHM(t).$implicit;return e.KtG(l.quantity=i)}),e.qZA()(),e.TgZ(10,"div",17)(11,"button",18),e.NdJ("click",function(){const r=e.CHM(t).index,l=e.oxw();return e.KtG(l.removeItem(r))}),e._uU(12,"Remove"),e.qZA()()()()}if(2&n){const t=o.$implicit;e.xp6(5),e.Q6J("ngModel",t.name),e.xp6(4),e.Q6J("ngModel",t.quantity)}}let _=(()=>{class n{constructor(t,s,i,r){this.requestService=t,this.employeeService=s,this.route=i,this.router=r,this.id=null,this.request={type:"Equipment",employeeId:"",items:[],status:"Pending"},this.employees=[],this.errorMessage=""}ngOnInit(){this.id=this.route.snapshot.params.id?+this.route.snapshot.params.id:null,this.employeeService.getAll().subscribe(t=>this.employees=t),this.id?this.requestService.getById(this.id).subscribe({next:t=>{this.request=t},error:t=>this.errorMessage=t.message}):this.addItem()}addItem(){this.request.items.push({name:"",quantity:1})}removeItem(t){this.request.items.splice(t,1)}save(){const t=Object.assign({},this.request);this.id||delete t.employeeId,(this.id?this.requestService.update(this.id,t):this.requestService.create(t)).subscribe({next:()=>this.router.navigate(["/requests"]),error:i=>this.errorMessage=i.message})}cancel(){this.router.navigate(["/requests"])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.s),e.Y36(g.G),e.Y36(a.gz),e.Y36(a.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-request-add-edit"]],decls:26,vars:4,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],["class","alert alert-danger",4,"ngIf"],[1,"mb-3"],[1,"form-label"],[1,"form-select",3,"ngModel","ngModelChange"],["class","border p-2 mb-2",4,"ngFor","ngForOf"],[1,"btn","btn-secondary",3,"click"],[1,"text-center"],[1,"btn","btn-primary","me-2",3,"click"],[1,"alert","alert-danger"],[1,"border","p-2","mb-2"],[1,"row"],[1,"col-md-5"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["type","number",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-2","d-flex","align-items-end"],[1,"btn","btn-danger",3,"click"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,q,2,1,"div",3),e.TgZ(5,"div",4)(6,"label",5),e._uU(7,"Type"),e.qZA(),e.TgZ(8,"select",6),e.NdJ("ngModelChange",function(r){return s.request.type=r}),e.TgZ(9,"option"),e._uU(10,"Equipment"),e.qZA(),e.TgZ(11,"option"),e._uU(12,"Leave"),e.qZA(),e.TgZ(13,"option"),e._uU(14,"Resources"),e.qZA()()(),e.TgZ(15,"div",4)(16,"label",5),e._uU(17,"Items"),e.qZA(),e.YNc(18,h,13,2,"div",7),e.TgZ(19,"button",8),e.NdJ("click",function(){return s.addItem()}),e._uU(20,"Add Item"),e.qZA()(),e.TgZ(21,"div",9)(22,"button",10),e.NdJ("click",function(){return s.save()}),e._uU(23,"Save"),e.qZA(),e.TgZ(24,"button",8),e.NdJ("click",function(){return s.cancel()}),e._uU(25,"Cancel"),e.qZA()()()()),2&t&&(e.xp6(2),e.hij("",s.id?"Edit":"Add"," Request"),e.xp6(2),e.Q6J("ngIf",s.errorMessage),e.xp6(4),e.Q6J("ngModel",s.request.type),e.xp6(10),e.Q6J("ngForOf",s.request.items))},dependencies:[c.sg,c.O5,u.YN,u.Kr,u.Fj,u.wV,u.EJ,u.JJ,u.On],encapsulation:2}),n})();var b=d(7110);function Z(n,o){if(1&n&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.AsE("",t.name," (x",t.quantity,")")}}function f(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw();return e.KtG(r.edit(i.id))}),e._uU(1,"Edit"),e.qZA()}}function v(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw();return e.KtG(r.delete(i.id))}),e._uU(1,"Delete"),e.qZA()}}function A(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"ul"),e.YNc(7,Z,2,2,"li",5),e.qZA()(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e.YNc(11,f,2,0,"button",7),e.YNc(12,v,2,0,"button",8),e.qZA()()),2&n){const t=o.$implicit,s=e.oxw();let i,r;e.xp6(2),e.Oqu(t.type),e.xp6(2),e.Oqu(null==t.employee?null:t.employee.employeeId),e.xp6(3),e.Q6J("ngForOf",t.requestItems),e.xp6(2),e.Oqu(t.status),e.xp6(2),e.Q6J("ngIf","Admin"===(null==(i=s.account())?null:i.role)),e.xp6(1),e.Q6J("ngIf","Admin"===(null==(r=s.account())?null:r.role))}}const T=[{path:"",component:(()=>{class n{constructor(t,s,i){this.requestService=t,this.accountService=s,this.router=i,this.requests=[],this.errorMessage=""}ngOnInit(){this.loadRequests()}loadRequests(){this.requestService.getAll().subscribe({next:t=>this.requests=t,error:t=>this.errorMessage=t.message})}add(){this.router.navigate(["/requests/add"])}edit(t){this.router.navigate(["/requests/edit",t])}delete(t){confirm("Are you sure you want to delete this request?")&&this.requestService.delete(t).subscribe({next:()=>this.loadRequests(),error:s=>this.errorMessage=s.message})}account(){return this.accountService.accountValue}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.s),e.Y36(b.B),e.Y36(a.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-request-list"]],decls:22,vars:1,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary","float-end",3,"click"],["class","btn btn-sm btn-primary me-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-danger",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-primary","me-1",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Requests"),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"table",4)(6,"thead")(7,"tr")(8,"th"),e._uU(9,"Type"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Employee"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Items"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Status"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Actions"),e.qZA()()(),e.TgZ(18,"tbody"),e.YNc(19,A,13,6,"tr",5),e.qZA()()(),e.TgZ(20,"button",6),e.NdJ("click",function(){return s.add()}),e._uU(21,"Add Request"),e.qZA()()()),2&t&&(e.xp6(19),e.Q6J("ngForOf",s.requests))},dependencies:[c.sg,c.O5],encapsulation:2}),n})()},{path:"add",component:_},{path:"edit/:id",component:_}];let C=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.ez,u.u5,a.Bz.forChild(T)]}),n})()}}]);