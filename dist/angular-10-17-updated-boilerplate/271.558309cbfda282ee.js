"use strict";(self.webpackChunkangular_10_17_updated_boilerplate=self.webpackChunkangular_10_17_updated_boilerplate||[]).push([[271],{271:(x,l,s)=>{s.r(l),s.d(l,{DepartmentsModule:()=>C});var c=s(6895),d=s(433),p=s(7784),t=s(8256),m=s(5631),g=s(7110);function _(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.delete(o.id))}),t._uU(1,"Delete"),t.qZA()}}function h(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td")(8,"button",8),t.NdJ("click",function(){const a=t.CHM(e).$implicit,T=t.oxw(2);return t.KtG(T.edit(a.id))}),t._uU(9,"Edit"),t.qZA(),t.YNc(10,_,2,0,"button",9),t.qZA()()}if(2&n){const e=i.$implicit,r=t.oxw(2);t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.description),t.xp6(2),t.Oqu(e.employeeCount),t.xp6(4),t.Q6J("ngIf","Admin"===r.account.role)}}function b(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"table",6)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"Name"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Description"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Employee Count"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Actions"),t.qZA()()(),t.TgZ(12,"tbody"),t.YNc(13,h,11,4,"tr",7),t.qZA()(),t.BQk()),2&n){const e=t.oxw();t.xp6(13),t.Q6J("ngForOf",e.departments)}}function f(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.add())}),t._uU(1,"Add Department"),t.qZA()}}let Z=(()=>{class n{constructor(e,r,o){this.departmentService=e,this.accountService=r,this.router=o,this.departments=[],this.errorMessage=""}ngOnInit(){this.account=this.accountService.accountValue,console.log(this.account),this.loadDepartments()}loadDepartments(){this.departmentService.getAll().subscribe({next:e=>this.departments=e,error:e=>this.errorMessage=e.message}),console.log(this.departments)}add(){this.router.navigate(["/departments/add"])}edit(e){this.router.navigate(["/departments/edit",e])}delete(e){confirm("Are you sure you want to delete this department?")&&this.departmentService.delete(e).subscribe({next:()=>this.loadDepartments(),error:r=>this.errorMessage=r.message})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.n),t.Y36(g.B),t.Y36(p.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-department-list"]],decls:7,vars:2,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"table-responsive"],[4,"ngIf"],["class","btn btn-primary float-end",3,"click",4,"ngIf"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-primary","me-1",3,"click"],["class","btn btn-sm btn-danger",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"btn","btn-primary","float-end",3,"click"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2,"Departments"),t.qZA(),t.TgZ(3,"div",2)(4,"div",3),t.YNc(5,b,14,1,"ng-container",4),t.qZA(),t.YNc(6,f,2,0,"button",5),t.qZA()()),2&e&&(t.xp6(5),t.Q6J("ngIf",r.departments&&r.departments.length),t.xp6(1),t.Q6J("ngIf","Admin"===r.account.role))},dependencies:[c.sg,c.O5],encapsulation:2}),n})();function v(n,i){if(1&n&&(t.TgZ(0,"div",10),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.errorMessage)}}let u=(()=>{class n{constructor(e,r,o){this.departmentService=e,this.route=r,this.router=o,this.id=null,this.department={name:"",description:""},this.errorMessage=""}ngOnInit(){this.id=this.route.snapshot.params.id?+this.route.snapshot.params.id:null,this.id&&this.departmentService.getById(this.id).subscribe({next:e=>this.department=e,error:e=>this.errorMessage=e.message})}save(){this.id?this.departmentService.update(this.id,this.department).subscribe({next:()=>this.router.navigate(["/departments"]),error:e=>this.errorMessage=e.message}):this.departmentService.create(this.department).subscribe({next:()=>this.router.navigate(["/departments"]),error:e=>this.errorMessage=e.message})}cancel(){this.router.navigate(["/departments"])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.n),t.Y36(p.gz),t.Y36(p.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-department-add-edit"]],decls:18,vars:4,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],["class","alert alert-danger",4,"ngIf"],[1,"mb-3"],[1,"form-label"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"text-center"],[1,"btn","btn-primary","me-2",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"alert","alert-danger"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2),t.qZA(),t.TgZ(3,"div",2),t.YNc(4,v,2,1,"div",3),t.TgZ(5,"div",4)(6,"label",5),t._uU(7,"Name"),t.qZA(),t.TgZ(8,"input",6),t.NdJ("ngModelChange",function(a){return r.department.name=a}),t.qZA()(),t.TgZ(9,"div",4)(10,"label",5),t._uU(11,"Description"),t.qZA(),t.TgZ(12,"input",6),t.NdJ("ngModelChange",function(a){return r.department.description=a}),t.qZA()(),t.TgZ(13,"div",7)(14,"button",8),t.NdJ("click",function(){return r.save()}),t._uU(15,"Save"),t.qZA(),t.TgZ(16,"button",9),t.NdJ("click",function(){return r.cancel()}),t._uU(17,"Cancel"),t.qZA()()()()),2&e&&(t.xp6(2),t.hij("",r.id?"Edit":"Add"," Department"),t.xp6(2),t.Q6J("ngIf",r.errorMessage),t.xp6(4),t.Q6J("ngModel",r.department.name),t.xp6(4),t.Q6J("ngModel",r.department.description))},dependencies:[c.O5,d.Fj,d.JJ,d.On],encapsulation:2}),n})();const A=[{path:"",component:Z},{path:"add",component:u},{path:"edit/:id",component:u}];let C=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.ez,d.u5,d.UX,p.Bz.forChild(A)]}),n})()}}]);